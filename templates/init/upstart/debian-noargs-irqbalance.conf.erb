# This file was generated by Puppet
# It is a modification of the Upstart script provided by Ubuntu
# irqbalance - Daemon to balance interrupts for SMP system

# irqbalance is a daemon to balance interrupts across multiple CPUs, which 
# can lead to better performance and IO balance on SMP systems.

description	"CPU interrupts balancing daemon"

start on runlevel [2345]
stop on runlevel [!2345]

expect fork

script 
	test -f <%= @config_dir_path -%>/<%= @config_file_name -%> && . <%= @config_dir_path -%>/<%= @config_file_name -%>

	test "$ENABLED" != "0" || exit 0

	if test "$ONESHOT" != "0"; then
		DOPTIONS="--oneshot"
	fi

	exec <%= @irqbalance_path -%>  $DOPTIONS

end script